<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô - Asthma Care</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap');
        body { font-family: 'Kanit', sans-serif; background-color: #f8fafc; }
        .form-radio { width: 1.2rem; height: 1.2rem; color: #1d4ed8; }
        .question-card { transition: all 0.3s ease; border-left: 4px solid transparent; }
        .question-card:hover { border-left-color: #3b82f6; background-color: #f1f5f9; }
        
        @keyframes bounce-in {
            0% { transform: scale(0.9); opacity: 0; }
            70% { transform: scale(1.05); }
            100% { transform: scale(1); opacity: 1; }
        }
        .animate-bounce-in { animation: bounce-in 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
    </style>
</head>
<body class="pb-28">

    <header class="bg-white text-blue-800 p-4 text-center sticky top-0 z-40 shadow-sm flex items-center justify-between px-4">
        <a href="index.html" class="text-gray-400 text-lg active:scale-90 transition-transform"><i class="fa-solid fa-chevron-left"></i></a>
        <h1 class="text-lg font-bold">‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏´‡∏≠‡∏ö‡∏´‡∏∑‡∏î</h1>
        <div class="w-4"></div>
    </header>

    <main class="p-4 max-w-md mx-auto">
        <div class="bg-blue-50 p-4 rounded-xl mb-6 border border-blue-100">
            <p class="text-xs text-blue-800 leading-relaxed">
                <i class="fa-solid fa-circle-info mr-1"></i>
                ‡πÇ‡∏õ‡∏£‡∏î‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á <b>4 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏≤</b> ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÇ‡∏£‡∏Ñ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
            </p>
        </div>

        <form id="asthmaForm" class="space-y-6">
            
            <div class="bg-white rounded-2xl p-5 shadow-sm border border-gray-100">
                <h2 class="text-blue-600 font-bold text-sm mb-4 flex items-center">
                    <i class="fa-solid fa-lungs mr-2"></i> ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1 ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ó‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏≤‡∏¢‡πÉ‡∏à
                </h2>
                
                <div class="mb-5 question-card p-2 rounded-lg">
                    <p class="text-sm font-medium mb-2">1. ‡∏°‡∏µ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ß‡∏µ‡πâ‡∏î (wheezing)?</p>
                    <div class="grid grid-cols-2 gap-2 text-sm text-gray-600">
                        <label class="flex items-center gap-2"><input type="radio" name="q1" value="0" required class="form-radio"> ‡πÑ‡∏°‡πà‡∏°‡∏µ</label>
                        <label class="flex items-center gap-2"><input type="radio" name="q1" value="1" class="form-radio"> ‡∏ô‡∏≤‡∏ô‡πÜ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</label>
                        <label class="flex items-center gap-2"><input type="radio" name="q1" value="2" class="form-radio"> ‡∏ö‡πà‡∏≠‡∏¢</label>
                        <label class="flex items-center gap-2"><input type="radio" name="q1" value="3" class="form-radio"> ‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô</label>
                    </div>
                </div>

                <div class="mb-5 question-card p-2 rounded-lg">
                    <p class="text-sm font-medium mb-2">2. ‡πÅ‡∏ô‡πà‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏Å ‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏∂‡∏î‡∏≠‡∏±‡∏î‡∏Ç‡∏ì‡∏∞‡∏´‡∏≤‡∏¢‡πÉ‡∏à?</p>
                    <div class="grid grid-cols-2 gap-2 text-sm text-gray-600">
                        <label class="flex items-center gap-2"><input type="radio" name="q2" value="0" required class="form-radio"> ‡πÑ‡∏°‡πà‡∏°‡∏µ</label>
                        <label class="flex items-center gap-2"><input type="radio" name="q2" value="1" class="form-radio"> ‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢</label>
                        <label class="flex items-center gap-2"><input type="radio" name="q2" value="2" class="form-radio"> ‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á</label>
                        <label class="flex items-center gap-2"><input type="radio" name="q2" value="3" class="form-radio"> ‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á</label>
                    </div>
                </div>

                <div class="question-card p-2 rounded-lg">
                    <p class="text-sm font-medium mb-2">3. ‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡∏•‡∏≥‡∏ö‡∏≤‡∏Å‡∏´‡∏•‡∏±‡∏á‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢/‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡∏±‡∏ô‡πÑ‡∏î?</p>
                    <div class="grid grid-cols-2 gap-2 text-sm text-gray-600">
                        <label class="flex items-center gap-2"><input type="radio" name="q3" value="0" required class="form-radio"> ‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢</label>
                        <label class="flex items-center gap-2"><input type="radio" name="q3" value="1" class="form-radio"> ‡∏ö‡∏≤‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á</label>
                        <label class="flex items-center gap-2"><input type="radio" name="q3" value="2" class="form-radio"> ‡∏ö‡πà‡∏≠‡∏¢</label>
                        <label class="flex items-center gap-2"><input type="radio" name="q3" value="3" class="form-radio"> ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</label>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-2xl p-5 shadow-sm border border-gray-100">
                <h2 class="text-indigo-600 font-bold text-sm mb-4 flex items-center">
                    <i class="fa-solid fa-moon mr-2"></i> ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 2 ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô
                </h2>
                
                <div class="mb-5 question-card p-2 rounded-lg">
                    <p class="text-sm font-medium mb-2">4. ‡∏ï‡∏∑‡πà‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÑ‡∏≠/‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡πÑ‡∏°‡πà‡∏™‡∏∞‡∏î‡∏ß‡∏Å?</p>
                    <div class="space-y-2 text-sm text-gray-600">
                        <label class="flex items-center gap-2"><input type="radio" name="q4" value="0" required class="form-radio"> ‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢</label>
                        <label class="flex items-center gap-2"><input type="radio" name="q4" value="1" class="form-radio"> 1‚Äì2 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</label>
                        <label class="flex items-center gap-2"><input type="radio" name="q4" value="2" class="form-radio"> 1‚Äì2 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á/‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</label>
                        <label class="flex items-center gap-2"><input type="radio" name="q4" value="3" class="form-radio"> >3 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á/‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</label>
                    </div>
                </div>

                <div class="question-card p-2 rounded-lg">
                    <p class="text-sm font-medium mb-2">5. ‡πÑ‡∏≠‡∏°‡∏≤‡∏Å‡πÉ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô/‡πÄ‡∏ä‡πâ‡∏≤‡∏°‡∏∑‡∏î?</p>
                    <div class="grid grid-cols-2 gap-2 text-sm text-gray-600">
                        <label class="flex items-center gap-2"><input type="radio" name="q5" value="0" required class="form-radio"> ‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢</label>
                        <label class="flex items-center gap-2"><input type="radio" name="q5" value="1" class="form-radio"> ‡∏ö‡∏≤‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á</label>
                        <label class="flex items-center gap-2"><input type="radio" name="q5" value="2" class="form-radio"> ‡∏ö‡πà‡∏≠‡∏¢</label>
                        <label class="flex items-center gap-2"><input type="radio" name="q5" value="3" class="form-radio"> ‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥</label>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-2xl p-5 shadow-sm border border-gray-100">
                <h2 class="text-orange-600 font-bold text-sm mb-4 flex items-center">
                    <i class="fa-solid fa-smog mr-2"></i> ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 3 ‡∏™‡∏¥‡πà‡∏á‡∏Å‡∏£‡∏∞‡∏ï‡∏∏‡πâ‡∏ô
                </h2>
                
                <div class="mb-5 question-card p-2 rounded-lg">
                    <p class="text-sm font-medium mb-2">6. ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡πà‡∏•‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏à‡∏≠‡∏ù‡∏∏‡πà‡∏ô/‡∏Ñ‡∏ß‡∏±‡∏ô/PM2.5?</p>
                    <div class="grid grid-cols-2 gap-2 text-sm text-gray-600">
                        <label class="flex items-center gap-2"><input type="radio" name="q6" value="0" required class="form-radio"> ‡πÑ‡∏°‡πà‡πÄ‡∏•‡∏¢</label>
                        <label class="flex items-center gap-2"><input type="radio" name="q6" value="1" class="form-radio"> ‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢</label>
                        <label class="flex items-center gap-2"><input type="radio" name="q6" value="2" class="form-radio"> ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô</label>
                        <label class="flex items-center gap-2"><input type="radio" name="q6" value="3" class="form-radio"> ‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á‡∏°‡∏≤‡∏Å</label>
                    </div>
                </div>

                <div class="question-card p-2 rounded-lg">
                    <p class="text-sm font-medium mb-2">7. ‡∏°‡∏µ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÄ‡∏¢‡πá‡∏ô/‡∏ù‡∏ô‡∏ï‡∏Å?</p>
                    <div class="grid grid-cols-2 gap-2 text-sm text-gray-600">
                        <label class="flex items-center gap-2"><input type="radio" name="q7" value="0" required class="form-radio"> ‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢</label>
                        <label class="flex items-center gap-2"><input type="radio" name="q7" value="1" class="form-radio"> ‡∏ö‡∏≤‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á</label>
                        <label class="flex items-center gap-2"><input type="radio" name="q7" value="2" class="form-radio"> ‡∏ö‡πà‡∏≠‡∏¢</label>
                        <label class="flex items-center gap-2"><input type="radio" name="q7" value="3" class="form-radio"> ‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</label>
                    </div>
                </div>
            </div>

            <div class="bg-emerald-50 rounded-2xl p-5 shadow-sm border border-emerald-100">
                <h2 class="text-emerald-700 font-bold text-sm mb-4 flex items-center">
                    <i class="fa-solid fa-notes-medical mr-2"></i> ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 4 ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û
                </h2>

                <div class="mb-4">
                    <p class="text-sm font-medium mb-2 text-emerald-900">8. ‡πÄ‡∏Ñ‡∏¢‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏£‡∏Ñ‡∏´‡∏≠‡∏ö‡∏´‡∏∑‡∏î?</p>
                    <div class="space-y-2 text-sm text-gray-600">
                        <label class="flex items-center gap-2"><input type="radio" name="q8" value="0" class="form-radio text-emerald-600"> ‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢</label>
                        <div class="flex items-center gap-2">
                            <input type="radio" name="q8" value="1" class="form-radio text-emerald-600">
                            <span>‡πÄ‡∏Ñ‡∏¢ (‡∏£‡∏∞‡∏ö‡∏∏‡∏≠‡∏≤‡∏¢‡∏∏)</span>
                            <input type="number" id="asthma_age" class="w-16 border-b border-emerald-300 bg-transparent text-center focus:outline-none" placeholder="...‡∏õ‡∏µ">
                        </div>
                    </div>
                </div>

                <div class="mb-4">
                    <p class="text-sm font-medium mb-2 text-emerald-900">9. ‡∏°‡∏µ‡∏Ñ‡∏ô‡πÉ‡∏ô‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏≠‡∏ö‡∏´‡∏∑‡∏î/‡∏†‡∏π‡∏°‡∏¥‡πÅ‡∏û‡πâ?</p>
                    <div class="flex gap-4 text-sm text-gray-600">
                        <label class="flex items-center gap-2"><input type="radio" name="q9" value="0" class="form-radio text-emerald-600"> ‡πÑ‡∏°‡πà‡∏°‡∏µ</label>
                        <label class="flex items-center gap-2"><input type="radio" name="q9" value="1" class="form-radio text-emerald-600"> ‡∏°‡∏µ</label>
                    </div>
                </div>

                <div>
                    <p class="text-sm font-medium mb-2 text-emerald-900">10. ‡πÄ‡∏Ñ‡∏¢‡πÉ‡∏ä‡πâ‡∏¢‡∏≤‡∏û‡πà‡∏ô‡∏Ç‡∏¢‡∏≤‡∏¢‡∏´‡∏•‡∏≠‡∏î‡∏•‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</p>
                    <div class="space-y-2 text-sm text-gray-600">
                        <label class="flex items-center gap-2"><input type="radio" name="q10" value="0" class="form-radio text-emerald-600"> ‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢</label>
                        <label class="flex items-center gap-2"><input type="radio" name="q10" value="1" class="form-radio text-emerald-600"> ‡πÄ‡∏Ñ‡∏¢</label>
                        <label class="flex items-center gap-2"><input type="radio" name="q10" value="2" class="form-radio text-emerald-600"> ‡πÉ‡∏ä‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥</label>
                    </div>
                </div>
            </div>

            <button type="button" onclick="calculateResult()" class="w-full bg-blue-600 text-white py-4 rounded-xl font-bold shadow-lg hover:bg-blue-700 active:scale-95 transition-all text-lg">
                ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô
            </button>
        </form>

        <div id="resultModal" class="hidden fixed inset-0 bg-black/60 z-[60] flex items-center justify-center p-4 backdrop-blur-sm">
            <div class="bg-white rounded-[2rem] p-6 w-full max-w-sm text-center shadow-2xl relative animate-bounce-in">
                <button onclick="document.getElementById('resultModal').classList.add('hidden')" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600"><i class="fa-solid fa-xmark text-xl"></i></button>
                
                <div id="result-icon" class="text-6xl mb-4 mt-2 transition-transform duration-500 hover:scale-110"></div>
                
                <h3 id="result-title" class="text-2xl font-bold mb-2"></h3>
                <p id="result-desc" class="text-gray-600 mb-6 text-sm leading-relaxed px-2"></p>
                
                <div class="flex gap-3">
                    <a href="history.html" class="flex-1 bg-blue-50 py-3 rounded-xl font-bold text-blue-600 text-sm hover:bg-blue-100 transition">‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</a>
                    <a href="location.html" class="flex-1 bg-blue-600 py-3 rounded-xl font-bold text-white text-sm hover:bg-blue-700 transition shadow-lg shadow-blue-200">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏£‡πâ‡∏≤‡∏ô‡∏¢‡∏≤</a>
                </div>
            </div>
        </div>
    </main>

    <nav class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 flex justify-around p-3 pb-6 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] z-50">
        <a href="index.html" class="flex flex-col items-center text-gray-400 hover:text-blue-500 transition">
            <i class="fa-solid fa-house text-xl mb-1"></i>
            <span class="text-[10px] font-bold">‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</span>
        </a>

        <a href="assessment.html" class="flex flex-col items-center text-blue-600">
            <i class="fa-solid fa-list-ul text-xl mb-1"></i>
            <span class="text-[10px] font-bold">‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</span>
        </a>
        </a>

        <a href="location.html" class="flex flex-col items-center text-gray-400 hover:text-orange-500 transition">
            <i class="fa-solid fa-location-dot text-xl mb-1"></i>
            <span class="text-[10px] font-bold">‡∏£‡πâ‡∏≤‡∏ô‡∏¢‡∏≤</span>
        </a>
    </nav>

    <script>
        function calculateResult() {
            const form = document.getElementById('asthmaForm');
            const formData = new FormData(form);
            let symptomScore = 0;
            let answeredCount = 0;

            // ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î (1-7)
            const questions = [
                "‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ß‡∏µ‡πâ‡∏î", "‡πÅ‡∏ô‡πà‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏Å", "‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡∏•‡∏≥‡∏ö‡∏≤‡∏Å",
                "‡∏ï‡∏∑‡πà‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô", "‡πÑ‡∏≠‡∏ï‡∏≠‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô", "‡πÄ‡∏à‡∏≠‡∏ù‡∏∏‡πà‡∏ô/‡∏Ñ‡∏ß‡∏±‡∏ô", "‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÄ‡∏¢‡πá‡∏ô/‡∏ù‡∏ô"
            ];
            const answersDetails = [];

            for (let i = 1; i <= 7; i++) {
                const val = formData.get('q' + i);
                if (val !== null) {
                    symptomScore += parseInt(val);
                    answeredCount++;
                    
                    // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
                    const selectedLabel = document.querySelector(`input[name="q${i}"]:checked`).parentElement.innerText.trim();
                    answersDetails.push({ q: questions[i-1], a: selectedLabel });
                }
            }

            if (answeredCount < 7) {
                alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1-3 ‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥");
                return;
            }
            
            const modal = document.getElementById('resultModal');
            const title = document.getElementById('result-title');
            const desc = document.getElementById('result-desc');
            const icon = document.getElementById('result-icon');

            let resultStatus = "";
            let colorCode = "";

            if (symptomScore <= 4) {
                icon.innerText = "‚úÖ";
                resultStatus = "‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÑ‡∏î‡πâ‡∏î‡∏µ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°";
                colorCode = "emerald-500";
                desc.innerText = "‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ó‡∏ö‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏õ‡∏≠‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á‡∏î‡∏µ‡∏°‡∏≤‡∏Å";
            } else if (symptomScore <= 9) {
                icon.innerText = "‚ö†Ô∏è";
                resultStatus = "‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÑ‡∏î‡πâ‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô";
                colorCode = "yellow-500";
                desc.innerText = "‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏°‡∏µ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡∏ö‡πâ‡∏≤‡∏á ‡∏Ñ‡∏ß‡∏£‡∏û‡∏Å‡∏¢‡∏≤‡∏û‡πà‡∏ô‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡∏ß‡πÅ‡∏•‡∏∞‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏™‡∏¥‡πà‡∏á‡∏Å‡∏£‡∏∞‡∏ï‡∏∏‡πâ‡∏ô";
            } else {
                icon.innerText = "üö®";
                resultStatus = "‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ / ‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏™‡∏π‡∏á";
                colorCode = "red-500";
                desc.innerText = "‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏°‡∏≤‡∏Å ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏´‡∏≠‡∏ö‡∏Å‡∏≥‡πÄ‡∏£‡∏¥‡∏ö ‡∏Ñ‡∏ß‡∏£‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡πÅ‡∏û‡∏ó‡∏¢‡πå‡πÇ‡∏î‡∏¢‡πÄ‡∏£‡πá‡∏ß";
            }

            title.innerText = resultStatus;
            title.className = `text-2xl font-bold mb-2 text-${colorCode}`;
            modal.classList.remove('hidden');

            // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á LocalStorage ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
            saveToHistory(symptomScore, resultStatus, colorCode, answersDetails);
        }

        function saveToHistory(score, result, color, details) {
            const history = JSON.parse(localStorage.getItem('asthma_history') || '[]');
            
            const newRecord = {
                timestamp: new Date().toISOString(),
                score: score,
                result: result,
                color: color,
                answers: details // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ä‡∏∏‡∏î‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏£‡∏≤‡∏¢‡∏Ç‡πâ‡∏≠‡∏•‡∏á‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢
            };

            history.push(newRecord);
            // ‡πÄ‡∏Å‡πá‡∏ö‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 30 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
            if (history.length > 30) history.shift();
            
            localStorage.setItem('asthma_history', JSON.stringify(history));
        }
    </script>
</body>
</html>